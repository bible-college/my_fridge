# Dockerfile.crawler
FROM python:3.10-slim

# í•„ìš”í•œ ì‹œìŠ¤í…œ ì˜ì¡´ì„± ì„¤ì¹˜ (ì´ì „ ë‹¨ê³„ì—ì„œ ì´ë¯¸ ì¶”ê°€)
RUN apt-get update && apt-get install -y \
    ffmpeg \
    git \
    build-essential \
    libmagic1 \
    libglib2.0-0 \
    && rm -rf /var/lib/apt/lists/*

# ì‘ì—… ë””ë ‰í„°ë¦¬ ì„¤ì •
WORKDIR /app

# uvë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
RUN pip install uv

# ğŸš¨ğŸš¨ uv.lockê³¼ pyproject.toml íŒŒì¼ì„ ëª¨ë‘ ë³µì‚¬í•©ë‹ˆë‹¤. ğŸš¨ğŸš¨
COPY uv.lock .
COPY pyproject.toml .

# uv.lock íŒŒì¼ì„ ê¸°ë°˜ìœ¼ë¡œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜
RUN uv sync